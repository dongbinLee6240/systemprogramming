#define _CRT_SECURE_NO_WARNINGS
#include<iostream>
#include<fstream>
#include<stdlib.h>
using namespace std;

struct userInfo
{
    char id[20];
    char name[20];
    int time;
    int score;
};

int main()
{
    string user = getenv("COMPUTERNAME");
    ofstream fout;
    userInfo users[10];

    fout.open("userinform.dat");

    if (!fout)
    {
        cerr << "파일 열기 실패" << endl;
        return 1;
    }

    // 사용자 정보 입력받아 파일에 쓰기
    for (int i = 0; i < 10; ++i)
    {
        cout << "사용자 #" << i + 1 << " 정보 입력:" << endl;

        cout << "id: " + user << '\n';

        cout << "이름: ";
        cin >> users[i].name;

        cout << "게임 시간: ";
        cin >> users[i].time;

        cout << "게임 실행 점수: ";
        cin >> users[i].score;

        // 파일에 쓰기
        fout << users[i].id << " " << users[i].name << " " << users[i].time << " " << users[i].score << endl;
    }

    fout.close();

    ifstream fin("userinform.dat");

    for (int i = 0; i < 10; ++i)
    {
        fin >> users[i].id >> users[i].name >> users[i].time >> users[i].score;
        cout << endl; //한칸 뛰기
        cout << "사용자 #" << i + 1 << " 정보:" << endl;
        cout << "ID: "+user<< endl;
        cout << "이름: " << users[i].name << endl;
        cout << "게임 시간: " << users[i].time << endl;
        cout << "게임 실행 점수: " << users[i].score << endl;
        cout << "-------------------------" << endl;
    }

    fin.close();

    return 0;
}
